# TAISUN Ops Environment Configuration
# Copy this file to .env.ops and fill in the values

# ===========================================
# Required: GitHub Integration
# ===========================================
# Personal access token with repo permissions
# Required for: approval watcher, issue creation, PR operations
GITHUB_TOKEN=ghp_your_token_here

# Repository for approval watcher (owner/repo format)
# If not set, will be detected from git remote
WATCHER_REPO=your-org/taisun_agent

# ===========================================
# Optional: External MCP Services
# ===========================================
# Notion integration token (for notion-knowledge-mcp)
NOTION_TOKEN=

# PostgreSQL connection string (for postgres-mcp-analyst)
# Format: postgresql://user:password@host:port/database
POSTGRES_DSN=

# ===========================================
# Service Configuration
# ===========================================
# Proxy server port
PROXY_PORT=3100

# Log level (debug, info, warn, error)
LOG_LEVEL=info

# ===========================================
# Worker Configuration
# ===========================================
# Dry-run mode (true = no actual execution)
WORKER_DRY_RUN=false

# Maximum concurrent job execution
WORKER_MAX_CONCURRENT=3

# ===========================================
# Watcher Configuration
# ===========================================
# Approval polling interval in milliseconds
WATCHER_POLL_INTERVAL_MS=60000

# ===========================================
# Scheduler Configuration (P15)
# ===========================================
# SLO check interval in seconds
SCHEDULER_INTERVAL_SECONDS=300

# Cooldown between WARN alerts in minutes
SCHEDULER_COOLDOWN_WARN_MINUTES=120

# Cooldown between CRITICAL alerts in minutes
SCHEDULER_COOLDOWN_CRITICAL_MINUTES=30

# Post alert when status returns to OK
SCHEDULER_POST_ON_RECOVERY=true

# Target issue number for alert comments (optional)
# If not set, creates new issues
SCHEDULER_TARGET_ISSUE=

# ===========================================
# Storage Configuration
# ===========================================
# Job store type (inmemory, jsonl)
JOBS_STORE_TYPE=jsonl

# Paths are set in docker-compose.ops.yml
# These use named volumes mounted to /data/*
